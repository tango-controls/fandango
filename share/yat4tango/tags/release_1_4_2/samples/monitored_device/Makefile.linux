#==============================================================================
# Makefile to generate the YAT Test - NL & JM - SOLEIL
#============================================================================== 

#==============================================================================
# BASE DIRS
#==============================================================================
YAT_ROOT=/Users/Parents/Soleil/tango-dist-x86_64/yat
YAT4TANGO_ROOT=../..
TANGO_ROOT=/Users/Parents/Soleil/tango-dist-x86_64/tango
OMNIORB_ROOT=/Users/Parents/Soleil/tango-dist-x86_64/omniorb

#==============================================================================
# INCLUDE DIRS
#==============================================================================
INCLUDE_DIRS = -I. -I$(YAT_ROOT)/include -I$(YAT4TANGO_ROOT)/include -I$(TANGO_ROOT)/include -I$(OMNIORB_ROOT)/include 

#==============================================================================
# LIB DIRS
#==============================================================================
LIB_DIRS = -L$(YAT_ROOT)/lib-static -L../../lib/static -L$(TANGO_ROOT)/lib-static -L$(OMNIORB_ROOT)/lib-static 

#==============================================================================
# BINDING SHARED LIB: NAME & EXTENSION
#==============================================================================
BIN_NAME = monitored_device_test

#==============================================================================
# COMP$(CC)ILER/LINKER OPTIONS for GNU/LINUX
#==============================================================================
CC=g++
#------------------------------------------------------------------------------
CFLAGS  = -g -O3 -W
#------------------------------------------------------------------------------
LD=gcc
#------------------------------------------------------------------------------
LDFLAGS =
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# LIBS
#------------------------------------------------------------------------------
LIBS = -lYAT -lYAT4Tango -ltango -llog4tango -lomniORB4 -lomniDynamic4 -lCOS4 -lomnithread  -lpthread -lstdc++

#------------------------------------------------------------------------------
# OBJS FILES
#------------------------------------------------------------------------------
SRC_OBJS = ./monitored_device_test.o
					 			 	 	 
#------------------------------------------------------------------------------
# RULE for .cpp files
#------------------------------------------------------------------------------
.SUFFIXES: .o .cpp
.cpp.o:
	$(CC) $(CFLAGS) $(INCLUDE_DIRS) -c -o $@ $<

#------------------------------------------------------------------------------
# RULE: all
#------------------------------------------------------------------------------
all: build install

#------------------------------------------------------------------------------
# RULE: build
#------------------------------------------------------------------------------
build: $(SRC_OBJS)
	$(LD) -o $(BIN_NAME) $(LDFLAGS) $(SRC_OBJS) $(LIB_DIRS) $(LIBS) 

#------------------------------------------------------------------------------
# RULE: install
#------------------------------------------------------------------------------
install:
	mkdir -p ../../bin/linux
	cp -f ./$(BIN_NAME) ../../bin/linux
	rm -f ./$(BIN_NAME)

#------------------------------------------------------------------------------
# RULE: clean
#------------------------------------------------------------------------------
clean:
	rm -f *.o
	rm -f *~
	rm -f $(BIN_NAME) 
	rm -f ../../bin/linux/$(BIN_NAME)



	








